# Q&A 생성 API: Gemini 전용 사용 분석

## 📊 현재 Q&A 프롬프트 분석

### Step 1: 질문 생성
- **형식**: 100% 한국어 대화형
- **역할**: 보험 지식이 부족한 일반인
- **특징**: 
  - 나이/성별에 맞는 말투
  - "설계서 받았는데요", "괜찮은가요?" 같은 자연스러운 한국어
  - 한국어 비중: **100%**

### Step 2: 답변 생성
- **형식**: 100% 한국어 대화형
- **역할**: 15년차 보험 전문가 (설계사)
- **특징**:
  - "질문자님~ 안녕하세요"
  - "설계사 댓글 형식"
  - 한국어 비중: **100%**

### Step 3: 대화형 스레드
- **형식**: 100% 한국어 대화형
- **역할**: 고객/설계사 대화
- **특징**:
  - 자연스러운 한국어 대화
  - "👤 고객:", "👨‍💼 설계사:" 형식
  - 한국어 비중: **100%**

---

## 🎯 사용자 요구사항

1. **정확하게 잘 나오기만 하면 됨** ✅
2. **대화톤이 달라지는 건 괜찮음** (다양성 좋음) ✅
3. **100% 한국어** ✅

---

## 💡 결론: Q&A 생성 API는 Gemini만 사용

### 이유

1. **100% 한국어 대화형**
   - 모든 프롬프트가 한국어 대화형
   - GPT는 한국어 자연스러움이 Gemini보다 떨어짐

2. **대화 톤의 자연스러움**
   - "설계서 받았는데요", "괜찮은가요?" 같은 표현
   - Gemini가 한국어 대화 톤을 더 자연스럽게 생성

3. **다양성은 OK**
   - 사용자가 "대화톤이 달라지는 건 괜찮다"고 명시
   - GPT가 필요 없음 (다양성은 Gemini만으로도 충분)

4. **정확성**
   - 검색 결과를 통합하는 작업이지만
   - 한국어 대화형이므로 Gemini가 더 적합

---

## 📋 최종 제안

### Q&A 생성 API: Gemini만 사용 (강제)

```typescript
// Q&A 생성 API
// Step 1, 2, 3 모두 Gemini만 사용
const result = await generateWithGeminiOnly(prompt, useFlash)
```

**모델 선택:**
- Step 1 (질문): Gemini-2.0-Flash (간단한 작업)
- Step 2 (답변): Gemini-2.5-Pro (복잡한 분석, 검색 결과 통합)
- Step 3 (스레드): Gemini-2.0-Flash (고객) / Gemini-2.5-Pro (설계사)

**폴백:**
- 실패 시 같은 제공자 내에서 모델 변경 (Flash ↔ Pro)
- GPT로 폴백하지 않음

---

### 다른 API는 스마트 라우팅 유지

```
설계서 분석:
  → 스마트 라우팅 (이미지 분석이므로 Gemini 유리)

의료 이미지 분석:
  → Gemini만 사용 (강제) - 한국어 + 이미지 + 복잡한 JSON
```

---

## ✅ 장점

1. **한국어 자연스러움 최대화**
   - 모든 Q&A가 자연스러운 한국어로 생성

2. **일관성 유지**
   - 같은 API 내에서 일관된 품질

3. **비용 효율**
   - Gemini가 GPT보다 저렴

4. **단순성**
   - 코드가 단순해짐 (GPT 분기 제거)

5. **다양성 유지**
   - Gemini만으로도 충분한 다양성 (사용자 요구사항 충족)

---

## 🎯 최종 권장사항

**Q&A 생성 API는 Gemini만 사용하세요!**

- 100% 한국어 대화형이므로 Gemini가 최적
- GPT는 필요 없음
- 다양성은 Gemini만으로도 충분

