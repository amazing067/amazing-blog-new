# Vercel API 키 변경 후 확인 가이드

## ✅ 환경 변수 변경 완료 후

### 1. 재배포 확인 (중요!)

Vercel에서 환경 변수를 변경하면:
- **자동 재배포**가 트리거될 수 있습니다
- 또는 **수동 재배포**가 필요할 수 있습니다

**확인 방법:**
1. Vercel 대시보드 → 프로젝트 선택
2. **Deployments** 탭 확인
3. 최신 배포가 "Building" 또는 "Ready" 상태인지 확인
4. 배포가 완료될 때까지 기다리기

### 2. 재시도 시간

에러 메시지에 따르면:
- **최소 1분** 대기 권장
- 또는 **2-3분** 대기 후 재시도 (안전)

**이유:**
- API 할당량 리셋 시간
- 환경 변수 적용 시간
- 재배포 완료 시간

### 3. 테스트 순서

1. **환경 변수 변경 확인**
   - Vercel → Settings → Environment Variables
   - `GEMINI_API_KEY` 값이 올바른지 확인

2. **재배포 완료 대기**
   - Deployments 탭에서 최신 배포가 "Ready" 상태인지 확인

3. **1-2분 대기**
   - API 할당량 리셋 시간
   - 환경 변수 적용 시간

4. **테스트 시도**
   - 메인 서버에서 블로그 생성 또는 Q&A 생성 시도

5. **로그 확인**
   - Vercel Logs 탭에서 Functions 로그 확인
   - 다음 로그가 보이면 정상:
     ```
     Gemini API 키 확인: [키 일부]...
     모델 시도: gemini-2.5-pro (시도 1/3)
     ✅ 성공 또는
     ⚠️ 할당량 초과 → gemini-1.5-pro 모델로 폴백 시도...
     ```

## 🔍 문제가 계속되면

### 확인 사항

1. **API 키가 올바른지 확인**
   - Google AI Studio에서 API 키 확인
   - 유료 플랜 키인지 확인

2. **환경 변수 적용 확인**
   - Vercel Functions 로그에서 API 키 일부 확인
   - 로컬 `.env.local`의 키와 동일한지 확인

3. **할당량 확인**
   - Google AI Studio → Usage 탭에서 할당량 확인
   - 일일/월간 한도 확인

## ⏰ 권장 대기 시간

**최소:** 1분
**권장:** 2-3분
**최대:** 5분 (재배포 포함)

## 📝 체크리스트

- [ ] Vercel 환경 변수 `GEMINI_API_KEY` 변경 완료
- [ ] 재배포 완료 확인 (Deployments 탭)
- [ ] 1-2분 대기
- [ ] 블로그 생성 또는 Q&A 생성 시도
- [ ] Vercel Logs에서 Functions 로그 확인
- [ ] 정상 작동 확인 또는 폴백 로직 작동 확인

